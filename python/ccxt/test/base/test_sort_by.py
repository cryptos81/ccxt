import os
import sys

root = os.path.dirname(os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__)))))
sys.path.append(root)

# ----------------------------------------------------------------------------

# PLEASE DO NOT EDIT THIS FILE, IT IS GENERATED AND WILL BE OVERWRITTEN:
# https://github.com/ccxt/ccxt/blob/master/CONTRIBUTING.md#how-to-contribute-code

# ----------------------------------------------------------------------------
# -*- coding: utf-8 -*-

import ccxt.async_support as ccxt  # noqa: F402
from ccxt.test.exchange.base import test_shared_methods  # noqa E402

def test_sort_by_1():
    # todo: other argument checks
    exchange = ccxt.Exchange({
        'id': 'sampleexchange',
    })
    arr = [{
    'x': 5,
}, {
    'x': 2,
}, {
    'x': 4,
}, {
    'x': 0,
}, {
    'x': 1,
}, {
    'x': 3,
}]
    new_array = exchange.sort_by(arr, 'x')
    test_shared_methods.assert_deep_equal(exchange, None, 'sortBy', new_array, [{
    'x': 0,
}, {
    'x': 1,
}, {
    'x': 2,
}, {
    'x': 3,
}, {
    'x': 4,
}, {
    'x': 5,
}])
    new_array_descending = exchange.sort_by(arr, 'x', True)
    test_shared_methods.assert_deep_equal(exchange, None, 'sortBy', new_array_descending, [{
    'x': 5,
}, {
    'x': 4,
}, {
    'x': 3,
}, {
    'x': 2,
}, {
    'x': 1,
}, {
    'x': 0,
}])
    empty_array = exchange.sort_by([], 'x')
    test_shared_methods.assert_deep_equal(exchange, None, 'sortBy', empty_array, [])


def test_sort_by_2():
    exchange = ccxt.Exchange({
        'id': 'sampleexchange',
    })
    # sort ascending by key1, then key2 (key1 values are all distinct here)
    arr = [{
    'x': 3,
    'y': 1,
}, {
    'x': 1,
    'y': 2,
}, {
    'x': 2,
    'y': 3,
}, {
    'x': 0,
    'y': 4,
}]
    sorted = exchange.sort_by_2(arr, 'x', 'y')
    test_shared_methods.assert_deep_equal(exchange, None, 'sortBy2', sorted, [{
    'x': 0,
    'y': 4,
}, {
    'x': 1,
    'y': 2,
}, {
    'x': 2,
    'y': 3,
}, {
    'x': 3,
    'y': 1,
}])
    # sort descending by key1
    arr2 = [{
    'x': 3,
    'y': 1,
}, {
    'x': 1,
    'y': 2,
}, {
    'x': 2,
    'y': 3,
}, {
    'x': 0,
    'y': 4,
}]
    sorted_descending = exchange.sort_by_2(arr2, 'x', 'y', True)
    test_shared_methods.assert_deep_equal(exchange, None, 'sortBy2', sorted_descending, [{
    'x': 3,
    'y': 1,
}, {
    'x': 2,
    'y': 3,
}, {
    'x': 1,
    'y': 2,
}, {
    'x': 0,
    'y': 4,
}])
    # when key1 values are equal, sort by key2 ascending
    arr3 = [{
    'x': 1,
    'y': 5,
}, {
    'x': 1,
    'y': 2,
}, {
    'x': 1,
    'y': 9,
}, {
    'x': 1,
    'y': 1,
}]
    sorted_by_key_2 = exchange.sort_by_2(arr3, 'x', 'y')
    test_shared_methods.assert_deep_equal(exchange, None, 'sortBy2', sorted_by_key_2, [{
    'x': 1,
    'y': 1,
}, {
    'x': 1,
    'y': 2,
}, {
    'x': 1,
    'y': 5,
}, {
    'x': 1,
    'y': 9,
}])
    # when key1 values are equal, sort by key2 descending
    arr4 = [{
    'x': 1,
    'y': 5,
}, {
    'x': 1,
    'y': 2,
}, {
    'x': 1,
    'y': 9,
}, {
    'x': 1,
    'y': 1,
}]
    sorted_by_key2_descending = exchange.sort_by_2(arr4, 'x', 'y', True)
    test_shared_methods.assert_deep_equal(exchange, None, 'sortBy2', sorted_by_key2_descending, [{
    'x': 1,
    'y': 9,
}, {
    'x': 1,
    'y': 5,
}, {
    'x': 1,
    'y': 2,
}, {
    'x': 1,
    'y': 1,
}])
    # mixed: sort by key1 first, then key2 as tiebreaker
    arr5 = [{
    'x': 2,
    'y': 3,
}, {
    'x': 1,
    'y': 5,
}, {
    'x': 2,
    'y': 1,
}, {
    'x': 1,
    'y': 2,
}, {
    'x': 2,
    'y': 2,
}]
    sorted_mixed = exchange.sort_by_2(arr5, 'x', 'y')
    test_shared_methods.assert_deep_equal(exchange, None, 'sortBy2', sorted_mixed, [{
    'x': 1,
    'y': 2,
}, {
    'x': 1,
    'y': 5,
}, {
    'x': 2,
    'y': 1,
}, {
    'x': 2,
    'y': 2,
}, {
    'x': 2,
    'y': 3,
}])
    # empty array
    empty_array = exchange.sort_by_2([], 'x', 'y')
    test_shared_methods.assert_deep_equal(exchange, None, 'sortBy2', empty_array, [])


def test_sort_by():
    test_sort_by_1()
    test_sort_by_2()
